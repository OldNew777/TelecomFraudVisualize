<!DOCTYPE html>
<html>

<head>
  <title>Assignment1</title>
  <script src="d3.min.js"></script>
  <script src="d3-v6-tip.js"></script>
  <script src="jquery-3.4.1.min.js"></script>
  <link rel="stylesheet" href="d3-tip.css">
</head>

<body>
  <svg width="1400" height="1400" id="mainsvg" class="svgs"></svg>
  <script>
    const svg = d3.select('svg');
    const width = svg.attr('width');
    const height = svg.attr('height');
    const margin = {top: 60, right: 30, bottom: 60, left: 150};
    const innerWidth = width - margin.left - margin.right;
    const innerHeight = height - margin.top - margin.bottom;


    const pie = d3.pie().value(d => d.population);
    const arcData = pie(data);
    console.log(arcData);
    const path = d3.arc().innerRadius(60).outerRadius(260);
    const color = d3.scaleOrdinal()
    .domain(data.map(d => d.city))
    .range(d3.schemeSet2.concat(d3.schemeSet3));
    
    svg.selectAll('path').data(arcData).join('path')
    .attr('d', path)
    .attr('transform', `translate(${width / 2}, ${height / 2})`)
    .attr('fill', d => color(d.data.city));
  
    const arcOuter = d3.arc().innerRadius(280).outerRadius(280);
    svg.append('g').attr('transform', `translate(${width / 2}, ${height / 2})`)
    .selectAll('text').data(arcData).join('text')
    .attr('transform', d => `translate(${arcOuter.centroid(d)})`)
    .attr('text-anchor', 'middle')
    .text(d => d.data.city);
  </script>
</body>

</html>